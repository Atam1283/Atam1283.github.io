<script>
  // Atatürk sözleri - üç dilde
  const quotes = {
    tr: [
      { text: "Yurtta sulh, cihanda sulh.", location: "1923, Türkiye" },
      { text: "Egemenlik, kayıtsız şartsız milletindir.", location: "1921, Türkiye" },
      { text: "Hayatta en hakiki mürşit ilimdir.", location: "1924, Türkiye" },
      { text: "Benim manevi mirasım bilim ve akıldır.", location: "1938, Türkiye" }
    ],
    en: [
      { text: "Peace at home, peace in the world.", location: "1923, Turkey" },
      { text: "Sovereignty unconditionally belongs to the nation.", location: "1921, Turkey" },
      { text: "Science is the truest guide in life.", location: "1924, Turkey" },
      { text: "My spiritual heritage is science and reason.", location: "1938, Turkey" }
    ],
    az: [
      { text: "Yurdda sülh, dünyada sülh.", location: "1923, Türkiyə" },
      { text: "Hökmdarlıq şərtsiz-şərtsiz millətindir.", location: "1921, Türkiyə" },
      { text: "Həyatda ən doğru yol göstərən elmidir.", location: "1924, Türkiyə" },
      { text: "Mənim mənəvi mirasım elm və ağıl olub.", location: "1938, Türkiyə" }
    ]
  };

  const quoteEl = document.getElementById('quote');
  const locationEl = document.getElementById('location');
  const settingsBtn = document.getElementById('settings-btn');
  const languageBtn = document.getElementById('language-btn');
  const settingsMenu = document.getElementById('settings-menu');
  const languageRadios = settingsMenu.querySelectorAll('input[name="language"]');
  const searchForm = document.getElementById('search-form');
  const searchInput = document.getElementById('search-input');

  // Dil seçimi için localStorage anahtarı
  const LANG_KEY = 'selectedLanguage';

  // Varsayılan dil
  let currentLang = localStorage.getItem(LANG_KEY) || 'tr';

  // Dil seçim radyo butonlarını güncelle
  function updateLanguageRadios() {
    languageRadios.forEach(radio => {
      radio.checked = radio.value === currentLang;
    });
  }

  // Sözleri rastgele göster (sayfa yüklendiğinde veya dil değiştiğinde)
  function showRandomQuote() {
    const list = quotes[currentLang];
    const randomIndex = Math.floor(Math.random() * list.length);
    const quote = list[randomIndex];
    quoteEl.textContent = `"${quote.text}"`;
    locationEl.textContent = quote.location;
  }

  // Ayarlar menüsünü aç/kapa
  function toggleSettingsMenu() {
    const isVisible = settingsMenu.style.display === 'block';
    if (isVisible) {
      settingsMenu.style.display = 'none';
      settingsBtn.setAttribute('aria-expanded', 'false');
      languageBtn.setAttribute('aria-expanded', 'false');
    } else {
      settingsMenu.style.display = 'block';
      settingsBtn.setAttribute('aria-expanded', 'true');
      languageBtn.setAttribute('aria-expanded', 'true');
    }
  }

  // Sayfa yüklendiğinde dil ayarlarını uygula
  function init() {
    updateLanguageRadios();
    showRandomQuote();
  }

  // Dil değişince işlemler
  function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem(LANG_KEY, lang);
    updateLanguageRadios();
    showRandomQuote();
  }

  // Arama formu submit olduğunda Google'da arama yapacak
  searchForm.addEventListener('submit', e => {
    e.preventDefault();
    const query = searchInput.value.trim();
    if (!query) return;
    const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
    window.open(searchUrl, '_blank');
  });

  // Ayarlar veya Dil butonuna tıklandığında menüyü aç/kapa
  settingsBtn.addEventListener('click', e => {
    e.stopPropagation();
    toggleSettingsMenu();
  });
  languageBtn.addEventListener('click', e => {
    e.stopPropagation();
    toggleSettingsMenu();
  });

  // Dil radyo butonlarına tıklayınca dili değiştir
  languageRadios.forEach(radio => {
    radio.addEventListener('change', e => {
      changeLanguage(e.target.value);
      settingsMenu.style.display = 'none';
      settingsBtn.setAttribute('aria-expanded', 'false');
      languageBtn.setAttribute('aria-expanded', 'false');
    });
  });

  // Menü dışında bir yere tıklandığında menüyü kapat
  document.addEventListener('click', () => {
    settingsMenu.style.display = 'none';
    settingsBtn.setAttribute('aria-expanded', 'false');
    languageBtn.setAttribute('aria-expanded', 'false');
  });

  // Sayfa yüklendiğinde çalıştır
  window.addEventListener('load', init);
</script>
